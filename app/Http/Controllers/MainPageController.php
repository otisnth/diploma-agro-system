<?php

namespace App\Http\Controllers;

use App\Models\Field;
use Illuminate\Http\Request;
use Inertia\Inertia;
use Inertia\Response;
use DateTime;

use RakibDevs\Weather\Weather;

class MainPageController extends Controller
{
    

    public function index(Request $request): Response
    {
        $coords = array(52.609025, 39.598970);

        $wt = new Weather();

        // $info = $wt->get3HourlyByCord($coords[0], $coords[1]);

        $info = json_decode('{ "cod": "200", "message": 0, "cnt": 40, "list": [ { "dt": "12/05/2024 12:00", "main": { "temp": 5.28, "feels_like": 1.9, "temp_min": 5.28, "temp_max": 7.42, "pressure": 1017, "sea_level": 1017, "grnd_level": 999, "humidity": 83, "temp_kf": -2.14 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 97 }, "wind": { "speed": 4.56, "deg": 355, "gust": 5.5 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-12 12:00:00" }, { "dt": "12/05/2024 15:00", "main": { "temp": 6.13, "feels_like": 3.76, "temp_min": 6.13, "temp_max": 7.84, "pressure": 1017, "sea_level": 1017, "grnd_level": 999, "humidity": 72, "temp_kf": -1.71 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 97 }, "wind": { "speed": 3.15, "deg": 351, "gust": 4.93 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-12 15:00:00" }, { "dt": "12/05/2024 18:00", "main": { "temp": 4.65, "feels_like": 2.1, "temp_min": 4.33, "temp_max": 4.65, "pressure": 1018, "sea_level": 1018, "grnd_level": 1000, "humidity": 73, "temp_kf": 0.32 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04n" } ], "clouds": { "all": 87 }, "wind": { "speed": 2.98, "deg": 326, "gust": 3.92 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-12 18:00:00" }, { "dt": "12/05/2024 21:00", "main": { "temp": 2.95, "feels_like": -0.05, "temp_min": 2.95, "temp_max": 2.95, "pressure": 1018, "sea_level": 1018, "grnd_level": 1000, "humidity": 79, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03n" } ], "clouds": { "all": 45 }, "wind": { "speed": 3.12, "deg": 338, "gust": 6.4 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-12 21:00:00" }, { "dt": "13/05/2024 00:00", "main": { "temp": 1.74, "feels_like": -1.04, "temp_min": 1.74, "temp_max": 1.74, "pressure": 1019, "sea_level": 1019, "grnd_level": 1001, "humidity": 84, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03n" } ], "clouds": { "all": 47 }, "wind": { "speed": 2.58, "deg": 9, "gust": 3.12 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-13 00:00:00" }, { "dt": "13/05/2024 03:00", "main": { "temp": 3.02, "feels_like": 1.31, "temp_min": 3.02, "temp_max": 3.02, "pressure": 1019, "sea_level": 1019, "grnd_level": 1002, "humidity": 76, "temp_kf": 0 }, "weather": [ { "id": 803, "main": "Clouds", "description": "облачно с прояснениями", "icon": "04d" } ], "clouds": { "all": 67 }, "wind": { "speed": 1.79, "deg": 41, "gust": 2.96 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-13 03:00:00" }, { "dt": "13/05/2024 06:00", "main": { "temp": 8.42, "feels_like": 6.88, "temp_min": 8.42, "temp_max": 8.42, "pressure": 1020, "sea_level": 1020, "grnd_level": 1002, "humidity": 52, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 48 }, "wind": { "speed": 2.6, "deg": 46, "gust": 2.96 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-13 06:00:00" }, { "dt": "13/05/2024 09:00", "main": { "temp": 9.73, "feels_like": 8.63, "temp_min": 9.73, "temp_max": 9.73, "pressure": 1020, "sea_level": 1020, "grnd_level": 1002, "humidity": 45, "temp_kf": 0 }, "weather": [ { "id": 803, "main": "Clouds", "description": "облачно с прояснениями", "icon": "04d" } ], "clouds": { "all": 76 }, "wind": { "speed": 2.32, "deg": 34, "gust": 2.55 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-13 09:00:00" }, { "dt": "13/05/2024 12:00", "main": { "temp": 10.72, "feels_like": 9.07, "temp_min": 10.72, "temp_max": 10.72, "pressure": 1019, "sea_level": 1019, "grnd_level": 1002, "humidity": 47, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 88 }, "wind": { "speed": 2.53, "deg": 28, "gust": 2.67 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.13 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-13 12:00:00" }, { "dt": "13/05/2024 15:00", "main": { "temp": 10.37, "feels_like": 8.82, "temp_min": 10.37, "temp_max": 10.37, "pressure": 1019, "sea_level": 1019, "grnd_level": 1002, "humidity": 52, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 97 }, "wind": { "speed": 2.15, "deg": 25, "gust": 2.93 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.13 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-13 15:00:00" }, { "dt": "13/05/2024 18:00", "main": { "temp": 6.41, "feels_like": 4.43, "temp_min": 6.41, "temp_max": 6.41, "pressure": 1021, "sea_level": 1021, "grnd_level": 1003, "humidity": 69, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10n" } ], "clouds": { "all": 95 }, "wind": { "speed": 2.68, "deg": 27, "gust": 3.79 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.14 }, "sys": { "pod": "n" }, "dt_txt": "2024-05-13 18:00:00" }, { "dt": "13/05/2024 21:00", "main": { "temp": 4.29, "feels_like": 2.38, "temp_min": 4.29, "temp_max": 4.29, "pressure": 1021, "sea_level": 1021, "grnd_level": 1003, "humidity": 77, "temp_kf": 0 }, "weather": [ { "id": 801, "main": "Clouds", "description": "небольшая облачность", "icon": "02n" } ], "clouds": { "all": 16 }, "wind": { "speed": 2.16, "deg": 25, "gust": 2.14 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-13 21:00:00" }, { "dt": "14/05/2024 00:00", "main": { "temp": 3.11, "feels_like": 1.28, "temp_min": 3.11, "temp_max": 3.11, "pressure": 1022, "sea_level": 1022, "grnd_level": 1004, "humidity": 79, "temp_kf": 0 }, "weather": [ { "id": 801, "main": "Clouds", "description": "небольшая облачность", "icon": "02n" } ], "clouds": { "all": 19 }, "wind": { "speed": 1.9, "deg": 29, "gust": 1.93 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-14 00:00:00" }, { "dt": "14/05/2024 03:00", "main": { "temp": 4.5, "feels_like": 3.16, "temp_min": 4.5, "temp_max": 4.5, "pressure": 1022, "sea_level": 1022, "grnd_level": 1004, "humidity": 76, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 25 }, "wind": { "speed": 1.67, "deg": 21, "gust": 2.29 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-14 03:00:00" }, { "dt": "14/05/2024 06:00", "main": { "temp": 9.61, "feels_like": 8.75, "temp_min": 9.61, "temp_max": 9.61, "pressure": 1022, "sea_level": 1022, "grnd_level": 1005, "humidity": 55, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 43 }, "wind": { "speed": 1.99, "deg": 36, "gust": 2.16 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-14 06:00:00" }, { "dt": "14/05/2024 09:00", "main": { "temp": 11.62, "feels_like": 9.96, "temp_min": 11.62, "temp_max": 11.62, "pressure": 1022, "sea_level": 1022, "grnd_level": 1005, "humidity": 43, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 87 }, "wind": { "speed": 2.01, "deg": 41, "gust": 2.12 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.12 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-14 09:00:00" }, { "dt": "14/05/2024 12:00", "main": { "temp": 12.48, "feels_like": 10.96, "temp_min": 12.48, "temp_max": 12.48, "pressure": 1022, "sea_level": 1022, "grnd_level": 1004, "humidity": 45, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 93 }, "wind": { "speed": 2.29, "deg": 36, "gust": 2.35 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-14 12:00:00" }, { "dt": "14/05/2024 15:00", "main": { "temp": 11.92, "feels_like": 10.53, "temp_min": 11.92, "temp_max": 11.92, "pressure": 1022, "sea_level": 1022, "grnd_level": 1005, "humidity": 52, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 93 }, "wind": { "speed": 2.19, "deg": 36, "gust": 2.66 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-14 15:00:00" }, { "dt": "14/05/2024 18:00", "main": { "temp": 7.94, "feels_like": 6.4, "temp_min": 7.94, "temp_max": 7.94, "pressure": 1023, "sea_level": 1023, "grnd_level": 1006, "humidity": 72, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10n" } ], "clouds": { "all": 92 }, "wind": { "speed": 2.48, "deg": 52, "gust": 3.39 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.2 }, "sys": { "pod": "n" }, "dt_txt": "2024-05-14 18:00:00" }, { "dt": "14/05/2024 21:00", "main": { "temp": 5.64, "feels_like": 3.77, "temp_min": 5.64, "temp_max": 5.64, "pressure": 1024, "sea_level": 1024, "grnd_level": 1006, "humidity": 79, "temp_kf": 0 }, "weather": [ { "id": 803, "main": "Clouds", "description": "облачно с прояснениями", "icon": "04n" } ], "clouds": { "all": 73 }, "wind": { "speed": 2.37, "deg": 46, "gust": 2.28 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-14 21:00:00" }, { "dt": "15/05/2024 00:00", "main": { "temp": 4.3, "feels_like": 1.84, "temp_min": 4.3, "temp_max": 4.3, "pressure": 1025, "sea_level": 1025, "grnd_level": 1007, "humidity": 84, "temp_kf": 0 }, "weather": [ { "id": 803, "main": "Clouds", "description": "облачно с прояснениями", "icon": "04n" } ], "clouds": { "all": 62 }, "wind": { "speed": 2.77, "deg": 34, "gust": 3.61 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-15 00:00:00" }, { "dt": "15/05/2024 03:00", "main": { "temp": 5.46, "feels_like": 3.65, "temp_min": 5.46, "temp_max": 5.46, "pressure": 1025, "sea_level": 1025, "grnd_level": 1007, "humidity": 82, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 33 }, "wind": { "speed": 2.26, "deg": 50, "gust": 4.38 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-15 03:00:00" }, { "dt": "15/05/2024 06:00", "main": { "temp": 10.86, "feels_like": 9.62, "temp_min": 10.86, "temp_max": 10.86, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 62, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 21 }, "wind": { "speed": 3.05, "deg": 73, "gust": 3.87 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.22 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-15 06:00:00" }, { "dt": "15/05/2024 09:00", "main": { "temp": 12.83, "feels_like": 11.53, "temp_min": 12.83, "temp_max": 12.83, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 52, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 64 }, "wind": { "speed": 3.36, "deg": 83, "gust": 3.56 }, "visibility": 10000, "pop": 1, "rain": { "3h": 0.96 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-15 09:00:00" }, { "dt": "15/05/2024 12:00", "main": { "temp": 13.87, "feels_like": 12.57, "temp_min": 13.87, "temp_max": 13.87, "pressure": 1025, "sea_level": 1025, "grnd_level": 1007, "humidity": 48, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 81 }, "wind": { "speed": 3.73, "deg": 75, "gust": 3.62 }, "visibility": 10000, "pop": 0.91, "rain": { "3h": 0.36 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-15 12:00:00" }, { "dt": "15/05/2024 15:00", "main": { "temp": 11.69, "feels_like": 10.66, "temp_min": 11.69, "temp_max": 11.69, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 67, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 73 }, "wind": { "speed": 3.95, "deg": 118, "gust": 5.6 }, "visibility": 10000, "pop": 1, "rain": { "3h": 0.7 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-15 15:00:00" }, { "dt": "15/05/2024 18:00", "main": { "temp": 8.15, "feels_like": 6.8, "temp_min": 8.15, "temp_max": 8.15, "pressure": 1026, "sea_level": 1026, "grnd_level": 1009, "humidity": 82, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10n" } ], "clouds": { "all": 84 }, "wind": { "speed": 2.28, "deg": 85, "gust": 2.54 }, "visibility": 10000, "pop": 1, "rain": { "3h": 0.38 }, "sys": { "pod": "n" }, "dt_txt": "2024-05-15 18:00:00" }, { "dt": "15/05/2024 21:00", "main": { "temp": 6.88, "feels_like": 5.51, "temp_min": 6.88, "temp_max": 6.88, "pressure": 1027, "sea_level": 1027, "grnd_level": 1009, "humidity": 87, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04n" } ], "clouds": { "all": 90 }, "wind": { "speed": 2.05, "deg": 91, "gust": 1.98 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-15 21:00:00" }, { "dt": "16/05/2024 00:00", "main": { "temp": 5.25, "feels_like": 3.49, "temp_min": 5.25, "temp_max": 5.25, "pressure": 1027, "sea_level": 1027, "grnd_level": 1009, "humidity": 89, "temp_kf": 0 }, "weather": [ { "id": 803, "main": "Clouds", "description": "облачно с прояснениями", "icon": "04n" } ], "clouds": { "all": 68 }, "wind": { "speed": 2.17, "deg": 95, "gust": 2.08 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-16 00:00:00" }, { "dt": "16/05/2024 03:00", "main": { "temp": 6.35, "feels_like": 5.19, "temp_min": 6.35, "temp_max": 6.35, "pressure": 1028, "sea_level": 1028, "grnd_level": 1010, "humidity": 85, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 35 }, "wind": { "speed": 1.76, "deg": 99, "gust": 2.91 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-16 03:00:00" }, { "dt": "16/05/2024 06:00", "main": { "temp": 11.53, "feels_like": 10.38, "temp_min": 11.53, "temp_max": 11.53, "pressure": 1028, "sea_level": 1028, "grnd_level": 1010, "humidity": 63, "temp_kf": 0 }, "weather": [ { "id": 802, "main": "Clouds", "description": "переменная облачность", "icon": "03d" } ], "clouds": { "all": 25 }, "wind": { "speed": 2.55, "deg": 108, "gust": 3.09 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-16 06:00:00" }, { "dt": "16/05/2024 09:00", "main": { "temp": 14.05, "feels_like": 12.87, "temp_min": 14.05, "temp_max": 14.05, "pressure": 1027, "sea_level": 1027, "grnd_level": 1009, "humidity": 52, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 43 }, "wind": { "speed": 2.87, "deg": 129, "gust": 2.58 }, "visibility": 10000, "pop": 1, "rain": { "3h": 1.09 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-16 09:00:00" }, { "dt": "16/05/2024 12:00", "main": { "temp": 14.81, "feels_like": 13.57, "temp_min": 14.81, "temp_max": 14.81, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 47, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 59 }, "wind": { "speed": 1.52, "deg": 178, "gust": 1.94 }, "visibility": 10000, "pop": 1, "rain": { "3h": 0.57 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-16 12:00:00" }, { "dt": "16/05/2024 15:00", "main": { "temp": 13.16, "feels_like": 12.02, "temp_min": 13.16, "temp_max": 13.16, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 57, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 84 }, "wind": { "speed": 1.82, "deg": 179, "gust": 2.12 }, "visibility": 10000, "pop": 0.72, "rain": { "3h": 0.42 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-16 15:00:00" }, { "dt": "16/05/2024 18:00", "main": { "temp": 10.88, "feels_like": 9.64, "temp_min": 10.88, "temp_max": 10.88, "pressure": 1025, "sea_level": 1025, "grnd_level": 1008, "humidity": 62, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04n" } ], "clouds": { "all": 92 }, "wind": { "speed": 1.14, "deg": 227, "gust": 1.09 }, "visibility": 10000, "pop": 0.3, "sys": { "pod": "n" }, "dt_txt": "2024-05-16 18:00:00" }, { "dt": "16/05/2024 21:00", "main": { "temp": 9.02, "feels_like": 7.86, "temp_min": 9.02, "temp_max": 9.02, "pressure": 1025, "sea_level": 1025, "grnd_level": 1007, "humidity": 69, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04n" } ], "clouds": { "all": 97 }, "wind": { "speed": 2.23, "deg": 271, "gust": 2.25 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-16 21:00:00" }, { "dt": "17/05/2024 00:00", "main": { "temp": 7.17, "feels_like": 5.55, "temp_min": 7.17, "temp_max": 7.17, "pressure": 1024, "sea_level": 1024, "grnd_level": 1006, "humidity": 78, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04n" } ], "clouds": { "all": 93 }, "wind": { "speed": 2.4, "deg": 271, "gust": 2.71 }, "visibility": 10000, "pop": 0, "sys": { "pod": "n" }, "dt_txt": "2024-05-17 00:00:00" }, { "dt": "17/05/2024 03:00", "main": { "temp": 8.07, "feels_like": 6.95, "temp_min": 8.07, "temp_max": 8.07, "pressure": 1023, "sea_level": 1023, "grnd_level": 1005, "humidity": 79, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 100 }, "wind": { "speed": 1.99, "deg": 273, "gust": 3.4 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-17 03:00:00" }, { "dt": "17/05/2024 06:00", "main": { "temp": 12.85, "feels_like": 11.84, "temp_min": 12.85, "temp_max": 12.85, "pressure": 1022, "sea_level": 1022, "grnd_level": 1005, "humidity": 63, "temp_kf": 0 }, "weather": [ { "id": 804, "main": "Clouds", "description": "пасмурно", "icon": "04d" } ], "clouds": { "all": 100 }, "wind": { "speed": 3.08, "deg": 264, "gust": 3.83 }, "visibility": 10000, "pop": 0, "sys": { "pod": "d" }, "dt_txt": "2024-05-17 06:00:00" }, { "dt": "17/05/2024 09:00", "main": { "temp": 15.84, "feels_like": 14.65, "temp_min": 15.84, "temp_max": 15.84, "pressure": 1021, "sea_level": 1021, "grnd_level": 1003, "humidity": 45, "temp_kf": 0 }, "weather": [ { "id": 500, "main": "Rain", "description": "небольшой дождь", "icon": "10d" } ], "clouds": { "all": 95 }, "wind": { "speed": 3.52, "deg": 269, "gust": 3.41 }, "visibility": 10000, "pop": 0.2, "rain": { "3h": 0.12 }, "sys": { "pod": "d" }, "dt_txt": "2024-05-17 09:00:00" } ], "city": { "id": 535121, "name": "Липецк", "coord": { "lat": 52.609, "lon": 39.599 }, "country": "RU", "population": 515655, "timezone": 10800, "sunrise": "12/05/2024 01:29", "sunset": "12/05/2024 17:06" } }');
        
        $weather = $info->list;

        $filterByHour = function ($object) {
            $parts = explode(' ', $object->dt);
            return isset($parts[1]) && $parts[1] === '12:00';
        };

        function degreesToDirection($degrees) {
            $directions = [
                'С' => [0, 11.25],
                'ССВ' => [11.25, 33.75],
                'СВ' => [33.75, 56.25],
                'ВСВ' => [56.25, 78.75],
                'В' => [78.75, 101.25],
                'ВЮВ' => [101.25, 123.75],
                'ЮВ' => [123.75, 146.25],
                'ЮЮВ' => [146.25, 168.75],
                'Ю' => [168.75, 191.25],
                'ЮЮЗ' => [191.25, 213.75],
                'ЮЗ' => [213.75, 236.25],
                'ЗЮЗ' => [236.25, 258.75],
                'З' => [258.75, 281.25],
                'ЗСЗ' => [281.25, 303.75],
                'СЗ' => [303.75, 326.25],
                'ССЗ' => [326.25, 348.75],
                'С' => [348.75, 360]
            ];
        
            foreach ($directions as $direction => $range) {
                if ($degrees >= $range[0] && $degrees < $range[1]) {
                    return $direction;
                }
            }
        
            return 'С';
        }

        $weather = array_filter($info->list, $filterByHour);

        $daysOfWeek = ['воскресенье', 'понедельник', 'вторник', 'среда', 'четверг', 'пятница', 'суббота'];
        $month = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];

        $forecast = array();

        foreach ($weather as $value) {
            $date = $month[DateTime::createFromFormat('d/m/Y H:i', $value->dt)->format('n') - 1] . ' ' . DateTime::createFromFormat('d/m/Y H:i', $value->dt)->format('d');
            $weekday = $daysOfWeek[DateTime::createFromFormat('d/m/Y H:i', $value->dt)->format('w')];

            $tempObj = array(
                'date' => $date,
                'weekday' => $weekday,
                'temp' => round($value->main->temp, 1) . "°С",
                'feels_like' => round($value->main->feels_like, 1) . "°С",
                'humidity' => $value->main->humidity . "%",
                'windDir' => degreesToDirection($value->wind->deg),
                'windSpeed' => round($value->wind->speed, 1) . " м/с",
                'icon' => 'https://openweathermap.org/img/wn/' . $value->weather[0]->icon . '@2x.png',
            );

            array_push($forecast, $tempObj);
        }

        return Inertia::render('Dashboard', [
            'forecast' => $forecast,
        ]);
    }

}
